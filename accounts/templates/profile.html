<!--extension to the base.html file-->
{% extends 'base.html' %}

<!--loads bootstrap tags -->
{% load bootstrap_tags %}

<!--page title-->
{% block page_title %}{{user}}'s profile{% endblock %}

<!--page heading-->
{% block page_heading%}{{user}}'s profile{% endblock %}

<!--main content of the page-->
{% block content%}

<!-- PROFILE SECTION: shows customer details email. name and a link to edit their details -->
<div class="container main-page">
    
    <!-- row -->
    <div class="row">
        
        <h1 id="profile-heading" class="font-purple bld line-center"> Your Profile </h1>
        
        <!-- Profile section -->
        <div id="profile-div" class="col-xs-12 background-white font-black">
    
            <div id="profile" class="line-center padding10">
            <p class="padding10"><span class="bld">Name: </span>{{customer_profile.first_name}} {{customer_profile.last_name}}</p>
             <p class="padding10"><span class="bld">Username: </span>{{customer_profile.username}}</p>
            <p class="padding10"><span class="bld">Email: </span>{{customer_profile.email}}</p>
            <a href="{% url 'edit_profile' %}" class="btn btn-success padding10" role="button">Edit Profile </a>
        </div>
    
        <!--ORDERS SECTION: shows all past orders  from this customer and their tracking details -->

        {% if orders %}
        <!-- past order div -->
        <div id="past-orders" class="col-xs-12">
            <h2 class="bld font-purple padding20"> PAST ORDERS </h2>
            {% for orders in orders %}
            <div>
                <p><span class="boldtext">{{orders.order.date}} - {{ orders.product.name }} </span>X {{ orders.quantity }} <span class="boldtext"> @ </span> {{ orders.product.price }} each - {{ orders.status }} </p>
                <p>
            </div><hr>
            {% endfor %}
        
            <!-- pagination for the orders section only showing 5 orders per page-->
            <div class="pagination">
                <span>
                {% if orders.has_previous %}
                <a href="?page={{ orders.previous_page_number }}">previous</a>
                {% endif %}
        
                <span class="current">
                    Page {{ orders.number }} of {{ orders.paginator.num_pages }}.
                </span>
        
                {% if orders.has_next %}
                    <a href="?page={{ orders.next_page_number }}">next</a>
                {% endif %}
                </span>
            </div>
            <!-- end pagination-->
            {% endif %}
            <!--end past orders div-->
        </div>
    
        
        <!-- REVIEWS SECTION: Shows all reviews this customer has written on this website      -->
        {% if reviews %}
        <!-- review div -->
        <div id="review-div" class="padding10 col-xs-12">
    
            <h2 class="bld font-purple padding20"> PAST REVIEWS </h2>
        
            {% for reviews in reviews %}
            <div class="row"><hr>
                <div class="col-sm-12">
                    <h3 class="font-purple">{{reviews.product}}</h3><hr>
                    <p><span class="bld"> Ratings: </span><span class="green">{{ reviews.rating }} / 5 </span> </p>
                    <p><span class="bld"> Product Title: </span> {{reviews.title}}</p>
                    <p><span class="bld"> Written By: </span>{{reviews.user}}</p>
                    <p><span class="bld"> Published On: </span>{{reviews.date}}</p>
                    <p><span class="bld"> Comment: </span> {{ reviews.comment|safe|linebreaks}}</p>
                    <p><span class="bld"> Would you recommend to a friend: </span> {{ reviews.would_you_recommend_to_a_friend}} </p>
                    <a href="{% url 'edit_review' reviews.id %}" class="btn btn-success" role="button">Edit Review </a>
                    <a href="{% url 'delete_review' reviews.id %}" class="btn btn-success" role="button">Delete Review</a>
                </div>
            </div>
            {% endfor %}
            <hr>
     
            <!-- pagination for the reviews section only showing 3 reviews per page-->
            <div class="pagination">
                <span>
                {% if reviews.has_previous %}
                <a href="?page={{ reviews.previous_page_number }}">previous</a>
                {% endif %}
        
                <span class="current">
                    Page {{ reviews.number }} of {{ reviews.paginator.num_pages }}.
                </span>
        
                {% if reviews.has_next %}
                <a href="?page={{ reviews.next_page_number }}">next</a>
                {% endif %}
                </span>
            </div>
            <!-- end pagination -->
    
            {% endif %}
            <!--close background white font black-->
            </div>
        </div>
    <!-- close row -->
    </div>
<!-- close container -->
</div>

{% endblock %}