<!--extension to the base.html file-->
{% extends 'base.html' %}

<!--loads bootstrap tags -->
{% load bootstrap_tags %}

<!--page title-->
{% block page_title %}{{user}}'s profile{% endblock %}

<!--page heading-->
{% block page_heading%}{{user}}'s profile{% endblock %}

<!--main content of the page-->
{% block content%}

<!-- PROFILE SECTION: shows customer details email. name and a link to edit their details -->
<div class="container">
    <h2> Your Profile </h2>
    <p>email: {{customer_profile.email}}</p>
    <p>name: {{customer_profile.first_name}} {{customer_profile.last_name}}</p>
    <a href="{% url 'edit_profile' %}" class="btn btn-primary" role="button">Edit Profile </a>
    <hr>

<!--ORDERS SECTION: shows all past orders  from this customer and their tracking details -->

{% if orders %}
    <h2> PAST ORDERS </h2>
    {% for orders in orders %}
    <div>
        <hr>
        <p><span class="boldtext">{{orders.order.date}} - {{ orders.product.name }} </span>X {{ orders.quantity }} <span class="boldtext"> @ </span> {{ orders.product.price }} each - {{ orders.status }}</p>
        <p>
    </div>
    
    {% endfor %}
    
    <!-- pagination for the orders section only showing 5 orders per page-->
    <div class="pagination">
        <span>
            {% if orders.has_previous %}
                <a href="?page={{ orders.previous_page_number }}">previous</a>
            {% endif %}
    
            <span class="current">
                Page {{ orders.number }} of {{ orders.paginator.num_pages }}.
            </span>
    
            {% if orders.has_next %}
                <a href="?page={{ orders.next_page_number }}">next</a>
            {% endif %}
        </span>
    </div>
    <!-- end pagination-->
    <hr><hr>
{% endif %}


<!-- REVIEWS SECTION: Shows all reviews this customer has written on this website      -->
{% if reviews %}

    <h2> PAST REVIEWS </h2>
    {% for reviews in reviews %}
   
    <div class="row">
        
        <div class="col-sm-12">
            <p><span class="boldtext"> Ratings: </span><span class="green">{{ reviews.rating }} / 5 </span> </p>
            <p><span class="boldtext"> Reviewed Product: </span> {{reviews.product}}</h4>
            <p><span class="boldtext"> Product Title: </span> {{reviews.title}}</p>
            <p><span class="boldtext"> Written By: </span>{{reviews.user}}</p>
            <p><span class="boldtext"> Published On: </span>{{reviews.date}}</p>
            <p><span class="boldtext"> Comment: </span> {{ reviews.comment|safe|linebreaks }}</p>
            <p><span class="boldtext"> Would you recommend to a friend: </span> {{ reviews.would_you_recommend_to_a_friend}} </p>
            <a href="{% url 'edit_review' reviews.id %}" class="btn btn-primary" role="button">Edit Review </a>
            <a href="{% url 'delete_review' reviews.id %}" class="btn btn-primary" role="button">Delete Review</a>
        </div>
        
    </div>
    <hr>
    {% endfor %}
    
    <!-- pagination for the reviews section only showing 3 reviews per page-->
    <div class="pagination">
        <span>
            {% if reviews.has_previous %}
                <a href="?page={{ reviews.previous_page_number }}">previous</a>
            {% endif %}
    
            <span class="current">
                Page {{ reviews.number }} of {{ reviews.paginator.num_pages }}.
            </span>
    
            {% if reviews.has_next %}
                <a href="?page={{ reviews.next_page_number }}">next</a>
            {% endif %}
        </span>
    </div>
    <!-- end pagination -->

{% endif %}

</div>

{% endblock %}